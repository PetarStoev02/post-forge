# ============================================
# TYPES
# ============================================

"A social media post"
type Post {
    id: ID!
    content: String!
    platforms: [Platform!]!
    status: PostStatus!
    errorMessage: String @rename(attribute: "error_message")
    scheduledAt: DateTime @rename(attribute: "scheduled_at")
    mediaUrls: [String!] @rename(attribute: "media_urls")
    hashtags: [String!]
    mentions: [String!]
    linkPreview: LinkPreview @rename(attribute: "link_preview")
    createdAt: DateTime! @rename(attribute: "created_at")
    updatedAt: DateTime! @rename(attribute: "updated_at")
}

"Link preview metadata"
type LinkPreview {
    url: String!
    title: String
    description: String
    image: String
}

"Dashboard statistics and data"
type DashboardStats {
    totalPostsCount: Int!
    totalPostsThisMonth: Int!
    totalPostsLastMonth: Int!
    scheduledPostsCount: Int!
    publishedPostsCount: Int!
    draftPostsCount: Int!
    upcomingPosts: [Post!]!
    scheduledDates: [String!]!
    postDates: [String!]!
    threadsEngagement: ThreadsEngagement
}

"OAuth provider credentials status (masked; for settings UI)"
type OAuthProviderCredentials {
    provider: String!
    clientIdSet: Boolean!
    clientIdMasked: String
    clientSecretSet: Boolean!
}

"Social account metadata from OAuth provider"
type SocialAccountMetadata {
    name: String
    username: String
    email: String
    avatar: String
}

"A post fetched directly from a platform API"
type PlatformPost {
    platformPostId: String!
    text: String
    timestamp: String!
    permalink: String!
    mediaType: String
    mediaUrl: String
    thumbnailUrl: String
}

"Paginated response for platform posts"
type PlatformPostsResponse {
    posts: [PlatformPost!]!
    nextCursor: String
    hasNextPage: Boolean!
}

"Per-post insights from the Threads API"
type ThreadsPostInsights {
    views: Int!
    likes: Int!
    replies: Int!
    reposts: Int!
    quotes: Int!
}

"Aggregated Threads engagement data (last 30 days)"
type ThreadsEngagement {
    views: Int!
    likes: Int!
    replies: Int!
    reposts: Int!
    quotes: Int!
    totalEngagements: Int!
    engagementRate: Float
}

"A connected social account (OAuth)"
type SocialAccount {
    id: ID!
    workspaceId: ID! @rename(attribute: "workspace_id")
    platform: Platform! @method(name: "platformForGraphQL")
    platformUserId: String! @rename(attribute: "platform_user_id")
    metadata: SocialAccountMetadata
    needsReconnect: Boolean! @method(name: "needsReconnect")
    createdAt: DateTime! @rename(attribute: "created_at")
    updatedAt: DateTime! @rename(attribute: "updated_at")
}
